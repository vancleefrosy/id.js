<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../id.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title>Identity Card Demo</title>
</head>
<body>
    <div class="col-md-6 offset-md-3">
        <h3>身份证校验及其属地查询</h3>
        <form action="" method="get">
            <div class="form-group">
                <input class="form-control" type="text" value="" name="identity" id="identity" minlength="18" size="20" />
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">提交</button>
            </div>
        </form>
        <div class="result">
            <pre>

            </pre>
        </div>
    </div>
    <script>
function request(key, val) {
    var val = (arguments[1] === undefined) ? null : arguments[1];
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split("=");
        if (pair[0] == key) {
            return pair[1];
        }
    }
    if ((typeof val == 'string') && (val.constructor == String)) {
        return (val === '') ? (false) : val;
    } else {
        return (false);
    }
}
var IdCard = request('identity', '42032319930606629x');
document.getElementById('identity').value = IdCard;

var area = require('Area');
var Id = IdentityCard;
var id = Id.IdentityCard(IdCard);
console.log('identity card number:', IdCard);
console.log('result: %j', id.info());

    </script>
</body>
</html>
